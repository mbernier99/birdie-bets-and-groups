-- Drop the old yardage constraint that's too restrictive
ALTER TABLE public.hole_tees DROP CONSTRAINT IF EXISTS check_yardage_range;

-- Add a new constraint that allows shorter holes (minimum 30 yards for par 3 courses)
ALTER TABLE public.hole_tees ADD CONSTRAINT check_yardage_range CHECK (yardage >= 30 AND yardage <= 800);

-- Insert Bandon Preserve course (13-hole par 3 course)
INSERT INTO public.courses (id, name, location, holes, par, latitude, longitude)
VALUES (
  '33333333-3333-3333-3333-333333333333',
  'Bandon Preserve',
  'Bandon Dunes Golf Resort, OR',
  13,
  39,
  43.1347,
  -124.4058
);

-- Insert tee boxes for Bandon Preserve (only 2 tees)
INSERT INTO public.course_tees (id, course_id, tee_name, tee_color, rating, slope, total_yardage)
VALUES 
  ('33333333-3333-3333-3333-333333333334', '33333333-3333-3333-3333-333333333333', 'Back Tee', 'Black', 58.5, 110, 1609),
  ('33333333-3333-3333-3333-333333333335', '33333333-3333-3333-3333-333333333333', 'Front Tee', 'White', 52.0, 95, 1121);

-- Insert holes for Bandon Preserve (all par 3, handicap distributed 1-13)
INSERT INTO public.holes (course_id, hole_number, par, handicap, tee_id) VALUES
  ('33333333-3333-3333-3333-333333333333', 1, 3, 7, '33333333-3333-3333-3333-333333333334'),
  ('33333333-3333-3333-3333-333333333333', 2, 3, 1, '33333333-3333-3333-3333-333333333334'),
  ('33333333-3333-3333-3333-333333333333', 3, 3, 13, '33333333-3333-3333-3333-333333333334'),
  ('33333333-3333-3333-3333-333333333333', 4, 3, 9, '33333333-3333-3333-3333-333333333334'),
  ('33333333-3333-3333-3333-333333333333', 5, 3, 5, '33333333-3333-3333-3333-333333333334'),
  ('33333333-3333-3333-3333-333333333333', 6, 3, 3, '33333333-3333-3333-3333-333333333334'),
  ('33333333-3333-3333-3333-333333333333', 7, 3, 2, '33333333-3333-3333-3333-333333333334'),
  ('33333333-3333-3333-3333-333333333333', 8, 3, 11, '33333333-3333-3333-3333-333333333334'),
  ('33333333-3333-3333-3333-333333333333', 9, 3, 8, '33333333-3333-3333-3333-333333333334'),
  ('33333333-3333-3333-3333-333333333333', 10, 3, 6, '33333333-3333-3333-3333-333333333334'),
  ('33333333-3333-3333-3333-333333333333', 11, 3, 4, '33333333-3333-3333-3333-333333333334'),
  ('33333333-3333-3333-3333-333333333333', 12, 3, 10, '33333333-3333-3333-3333-333333333334'),
  ('33333333-3333-3333-3333-333333333333', 13, 3, 12, '33333333-3333-3333-3333-333333333334');

-- Insert hole_tees for Bandon Preserve - Back Tee
INSERT INTO public.hole_tees (hole_id, tee_id, yardage)
SELECT h.id, '33333333-3333-3333-3333-333333333334', 
  CASE h.hole_number 
    WHEN 1 THEN 134 WHEN 2 THEN 150 WHEN 3 THEN 87 WHEN 4 THEN 118 WHEN 5 THEN 142
    WHEN 6 THEN 131 WHEN 7 THEN 147 WHEN 8 THEN 63 WHEN 9 THEN 134 WHEN 10 THEN 120
    WHEN 11 THEN 142 WHEN 12 THEN 132 WHEN 13 THEN 109
  END
FROM public.holes h
WHERE h.course_id = '33333333-3333-3333-3333-333333333333';

-- Insert hole_tees for Bandon Preserve - Front Tee
INSERT INTO public.hole_tees (hole_id, tee_id, yardage)
SELECT h.id, '33333333-3333-3333-3333-333333333335', 
  CASE h.hole_number 
    WHEN 1 THEN 90 WHEN 2 THEN 93 WHEN 3 THEN 65 WHEN 4 THEN 83 WHEN 5 THEN 95
    WHEN 6 THEN 77 WHEN 7 THEN 119 WHEN 8 THEN 40 WHEN 9 THEN 88 WHEN 10 THEN 93
    WHEN 11 THEN 95 WHEN 12 THEN 108 WHEN 13 THEN 75
  END
FROM public.holes h
WHERE h.course_id = '33333333-3333-3333-3333-333333333333';